<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.itrip.prj.guide.mapper.GuideMapper">

<select id="guideSelectList" >
	
</select>

<!-- 가이드 마이페이지 버튼 누르고 들어갈때 [박은지]-->
<select id="guideSelect" resultType="co.itrip.prj.guide.service.GuideVO">
	 SELECT G.GUIDE_ID
		,G.CAREER
		,G.DC
		,G.DUTY
		,G.ATTACH
		,G.ATTACH_DIR
		,G.STATE_CD
		,G.DT
		,STAR
              ,C.CD_NAME
              ,CASE  WHEN G.CAREER= '1' THEN '신입(1년 이하)'
                  WHEN G.CAREER= '2' THEN '주니어(1년 ~ 3년)'
                  WHEN G.CAREER= '3' THEN '미들(4년 ~ 8년)'
                  WHEN G.CAREER= '4' THEN '시니어(9년 이상)'
                  WHEN G.CAREER= '5' THEN 'Lead레벨(15년 이상)'
               ELSE ' '
           END AS CARE
		FROM GUIDE G, CMMNCD C 
		WHERE G.DUTY = C.CD_NO
              AND C.CD_INI='D'
              AND GUIDE_ID = #{guideId}
</select>

<!-- 유저 가이드 신청 [권소정] -->
<insert id="guideInsert" parameterType="co.itrip.prj.guide.service.GuideVO">
	INSERT INTO GUIDE VALUES(#{guideId},#{career},#{dc},#{duty},#{attach},#{attachDir},'1',sysdate,0)
</insert>

<!-- 가이드 정보수정 [박은지] -->
<update id="guideUpdate"> 
	UPDATE GUIDE
	<set>
		<if test="career != null ">CAREER = #{career},</if>
		<if test="dc != null">DC = #{dc},</if>
		<if test="duty != null">DUTY = #{duty}</if>
	</set>
	WHERE GUIDE_ID = #{guideId}
</update>

<!-- <select id="userList">
select c.guide_id, c.class_no, p.no, c.title, p.member_id
from class c, payform p
where c.class_no = p.no
and upper(p.category) = 'CLASS';
</select> -->

</mapper>