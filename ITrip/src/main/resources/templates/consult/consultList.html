<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">
<head>
<meta charset="utf-8" />
<title>KidKinder - Kindergarten Website Template</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport" />
<meta content="Free HTML Templates" name="keywords" />
<meta content="Free HTML Templates" name="description" />

<!-- Favicon -->
<link href="kidkinder/img/favicon.ico" rel="icon" />

<!-- Google Web Fonts -->
<link rel="preconnect" href="https://fonts.gstatic.com" />
<link
	href="https://fonts.googleapis.com/css2?family=Handlee&family=Nunito&display=swap"
	rel="stylesheet" />

<!-- Font Awesome -->
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
	rel="stylesheet" />

<!-- Flaticon Font -->
<link href="kidkinder/lib/flaticon/font/flaticon.css" rel="stylesheet" />

<!-- Libraries Stylesheet -->
<link href="kidkinder/lib/owlcarousel/assets/owl.carousel.min.css"
	rel="stylesheet" />
<link href="kidkinder/lib/lightbox/css/lightbox.min.css" rel="stylesheet" />

<!-- Customized Bootstrap Stylesheet -->
<link href="kidkinder/css/style.css" rel="stylesheet" />
<style>
.card{
	display: inline-block;
	width: 250px;
	margin : 15px;
}
.card-body{
	min-height: 150px;
}
</style>
</head>
<body layout:fragment="content">

	<div class="container-fluid pt-5">
		<div class="container">
		<div class="text-center pb-2" ></div> 
		
		<!-- 활성화 상태의 카드를 반복하여 생성하고 상담 리스트 화면에 뿌려주기 -->
				<div class="row pb-3 list" >
				
				<div class="card "  th:each="consultList : ${pageInfo.list}" th:if="${consultList.ennc} == '활성화'">
				  <div class="card-body" >
				    <h5 class="card-title" th:text="${consultList.title}"></h5>
				  </div>
					  <ul class="list-group list-group-flush">
					    <li class="list-group-item" th:text="'직무   '+${consultList.cdName}"></li>
					    <li class="list-group-item" th:text="'경력   '+${consultList.career}"></li>
					  	<li class="list-group-item"><a href="" class="btn btn-primary px-4 mx-auto my-2 consultListInfo">더보기</a></li>
					  </ul>
					  <input type="text" th:value="${consultList.consultNo}">
				</div>
			</div>
		</div>
	</div>
	
<!-- 페이지네이션 -->
			<nav aria-label="Page navigation example">
				<ul class="pagination pagination-info  justify-content-center">
					<li class="page-item disabled"
						th:if="${pageInfo.isIsFirstPage()}"><span
						class="page-link">«</span></li>
					<li class="page-item"
						th:if="${!pageInfo.isIsFirstPage() && pageInfo.getList().size() > 0}"><a
						class="page-link"
						th:href="|javascript:gopage([[${pageInfo.getPrePage()}]])|"
						rel="prev">«</a></li>
					<li th:class="|page-item ${(pageInfo.pageNum eq page) ? 'active': ''} |"
						th:each="page:${pageInfo.navigatepageNums}"><span
						class="page-link" th:if="${pageInfo.pageNum eq page}"
						th:text="${page}"></span> <a class="page-link"
						th:unless="${pageInfo.pageNum eq page}"
						th:href="|javascript:gopage(${page})|" th:text="${page}">{{$page}}</a></li>
					<li class="page-item" th:if="${pageInfo.hasNextPage}"><a
						class="page-link"
						th:href="|javascript:gopage([[${pageInfo.getNextPage()}]])|"
						rel="next">»</a></li>
					<li class="page-item disabled"
						th:unless="${pageInfo.hasNextPage}"><span
						class="page-link">»</span></li>
				</ul>
			</nav>
		
		<!-- 더보기 버튼 클릭 시 상세보기 넘어갈때 글번호 가져가려고 만든 히든폼 -->	
		<form id="frm" method="post">
			<input type="hidden" id="consultNo" name="consultNo">
			<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"> <!-- 시큐리티에서 설정하고 Application쿠키에 담기는 name과 토큰 -->
		</form>	
			
	<script>
	
	// 페이징
	function gopage(p) {
		location.href = '/consultList.do?pageNum=' + p;
	}
	
	// 상담 더보기버튼 클릭시 (상세보기)
	$(".list").on("click",".consultListInfo",function(e){
		//console.log("클릭이벤트 실행됌")
		e.preventDefault();
		let tg = e.currentTarget;
		let no = $(tg).parent().closest("ul").next().val();
		//console.log(tg)
		//console.log(no)
		frm.consultNo.value = no;
		frm.action = "consultSelectOne.do";
		frm.submit();
		
	})
	
	</script> <a href="#" class="btn btn-primary p-3 back-to-top"><i class="fa fa-angle-double-up"></i></a>

	<!-- JavaScript Libraries -->
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
	<script src="bootstrap/kidkinder/lib/easing/easing.min.js"></script>
	<script src="bootstrap/kidkinder/lib/owlcarousel/owl.carousel.min.js"></script>
	<script src="bootstrap/kidkinder/lib/isotope/isotope.pkgd.min.js"></script>
	<script src="bootstrap/kidkinder/lib/lightbox/js/lightbox.min.js"></script>

	<!-- Contact Javascript File -->
	<script src="bootstrap/kidkinder/mail/jqBootstrapValidation.min.js"></script>
	<script src="bootstrap/kidkinder/mail/contact.js"></script>

	<!-- Template Javascript -->
	<script src="bootstrap/kidkinder/js/main.js"></script>
	
</body>
</html>
