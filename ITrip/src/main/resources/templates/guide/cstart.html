<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" 
layout:decorate="~{layout/layout}"
xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
 <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Layout - Voler Admin Dashboard</title>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css">
    <script src="js/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="bootstrap/voler/assets/css/bootstrap.css">
    
    <link rel="stylesheet" href="bootstrap/voler/assets/vendors/perfect-scrollbar/perfect-scrollbar.css">
    <link rel="stylesheet" href="bootstrap/voler/assets/css/app.css">
    <link rel="shortcut icon" href="bootstrap/voler/assets/images/favicon.svg" type="image/x-icon">
    <style>

#testDiv{
	width:900px;
	margin:0 auto;
}
</style>
</head>
<body layout:fragment="content">
<div class="text-center">
        <h1 class="display-5 mb-5">Start Class</h1>
    </div>
<div class="col-md-6 col-12" id="testDiv">
        <div class="card">
            <div class="card-header">
            <h4 class="card-title">Class 신청폼</h4>
            </div>
            <div class="card-content">
            <div class="card-body">
                <form class="form form-horizontal" action="classInsert.do" onsubmit="return message()" method="post" enctype="multipart/form-data">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                <div class="form-body">
                    <div class="row">
                    <div class="col-md-4" >
                        <label>가이드 아이디</label>
                    </div>
                    <div class="col-md-8 form-group" th:each="gui: ${members}">
                        <input type="text" id="guideId" class="form-control" name="guideId" readonly="readonly" th:value=${gui.memberId}>
                    </div>
                    <div class="col-md-4">
                        <label>클래스 이름</label>
                    </div>
                    <div class="col-md-8 form-group">
                        <input type="text" id="title" class="form-control" name="title" placeholder="class name">
                    </div>
                    <div class="col-md-4">
                        <label>클래스 카테고리</label>
                    </div>
                    <div class="col-md-8 form-group">
                        <select class="form-select" id="jobCd" name="jobCd">
                        		<option selected value="">-- 카테고리 선택 --</option>
                                <option th:each="job : ${joblist}" th:value="${job.cdNo}" th:utext="${job.cdName}"></option>
                        </select> 
                    </div>
                    <div class="col-md-4">
                        <label>클래스 설명</label>
                    </div>
                    <div class="col-md-8">
                                <div class="form-group mb-3">
                                    <textarea class="form-control" id="content" name="content" rows="3" placeholder="50자 이상 100자 이하으로 작성가능합니다."></textarea>
                                </div>
                            </div>
                            <div class="col-md-4">
                        <label>상세 커리큘럼</label>
                    </div>
                    <div class="col-md-8">
                                <div class="form-group mb-3">
                                    <textarea class="form-control" id="crclm" name="crclm" rows="3" placeholder="커리큘럼은 100자 이상 500자 이하으로 작성가능합니다."></textarea>
                                </div>
                            </div>
                    
                    <div class="col-md-4">
                        <label>수업시간</label>
                    </div>
                     <div class="col-md-4 form-group" >                    	                    	
                        <div class="form-check">
                            <input class="form-check-input" type="radio" value="2" id="classCnt" name="classCnt" checked onclick="twoOut()">
                            <label class="form-check-label" for="flexRadioDefault1" >
                                2회
                            </label>                                                      
                        </div>          
                    </div>
                    <div class="col-md-4 form-group" >
                    <div class="form-check">
                            <input class="form-check-input" type="radio" value="4" id="classCnt" name="classCnt" onclick="twoAdd()">
                            <label class="form-check-label" for="flexRadioDefault2" >
                                4회
                            </label>
                        </div>  
                    </div>  
                    
                    <div class="row" id="classtime">
                    <!-- 수업시간 폼 1 start -->  
					
                    <div class="col-md-3"></div>
                    <div class="col-md-2  form-group">1회차</div>
                    <div class="col-md-2  form-group" >
                        <input type="date" id="term1" class="form-control datepicker" name="classDt[0].term" >
                    </div>
                    <div class="col-md-2  form-group" >
                        <input type="text" id="beginTime1" class="timestart form-control" name="classDt[0].beginTime"> 
                    </div> 시~
                    <div class="col-md-2  form-group" >
                        <input type="text" id="endTime1" class="timeend form-control" name="classDt[0].endTime"> 
                    </div> 시 
					
                    <!-- 수업시간 폼 1 end -->
                      <!-- 수업시간 폼 1 start -->  
				
                    <div class="col-md-3"></div>
                    <div class="col-md-2  form-group">2회차</div>
                    <div class="col-md-2  form-group" >
                        <input type="date" id="term2" class="form-control" name="classDt[1].term">
                    </div>
                    <div class="col-md-2  form-group" >
                        <input type="text" id="beginTime2" class="timestart form-control" name="classDt[1].beginTime"> 
                    </div> 시~
                    <div class="col-md-2  form-group" >
                        <input type="text" id="endTime2" class="timeend form-control" name="classDt[1].endTime"> 
                    </div> 시 
					
                    <!-- 수업시간 폼 1 end -->
                    </div>
                    
                    <div class="col-md-4">
                        <label>금액</label>
                    </div>
                    <div class="col-md-8">
                        <input type="number" value="0" min="1" max="300000" id="price" class="form-control form-group" name="price" >

                    </div>
                     <div class="col-md-4">
                        <label>정원</label>
                    </div>
                    <div class="col-md-8">
                        <input type="number" value="0" min="1" max="10" id="psncpa" class="form-control form-group" name="psncpa" >
                    </div>
                    <div class="col-md-4">
                        <label>첨부파일</label>
                    </div>
                    <div class="col-md-8">
                        <input type="file" id="file" class="form-control form-group" name="file" >
                    </div>
                    <div class="col-sm-12 d-flex justify-content-end">
                        <button type="submit" class="btn btn-primary mr-1 mb-1">제출</button>
                        <button type="reset" class="btn btn-light-secondary mr-1 mb-1">초기화</button>
                    </div>
                    </div>
                </div>
                </form>
            </div>
            </div>
        </div>
        </div>
        <script type="text/javascript">
        
         let classtime = document.getElementById("classtime");
     	
        
          $(document).ready(function(){ 
        	  
        			// 시작시간
        		  $('input.timestart').timepicker({
      	    	 	timeFormat: 'HH:mm',
      	            interval: 60,
      	            minTime: '09',
      	            maxTime: '6:00pm',
      	            dynamic: false,
      	            dropdown: true,
      	            scrollbar: true
      	    	
      	     	}); 
        			
        			// 종료시간
      	   	 	$('input.timeend').timepicker({
   	    	 		timeFormat: 'HH:mm',
   	            	interval: 60,
   	            	minTime: '10',
   	            	maxTime: '10:00pm',
   	            	dynamic: false,
   	            	dropdown: true,
   	            	scrollbar: true
   	    	
   	    		});
        	 
        	});
         
          
         // 기본 설정
         $('.timepicker').timepicker({
        	    timeFormat: 'h:mm p',
        	    interval: 60,
        	    minTime: '10',
        	    maxTime: '6:00pm',
        	    defaultTime: '11',
        	    startTime: '10:00',
        	    dynamic: false,
        	    dropdown: true,
        	    scrollbar: true
        	});
         
         
         // 4회 선택 폼
         function twoAdd() {
        	 
        	 classtime.innerHTML="";
        	 classtime.innerHTML+=` 
					
                 <div class="col-md-3"></div>
                 <div class="col-md-2  form-group" >1회차</div>
                 <div class="col-md-2  form-group" >
                     <input type="date" id="term1" class="form-control" name="classDt[0].term">
                 </div>
                 <div class="col-md-2  form-group" >
                     <input type="text" id="beginTime1" class="timestart form-control" name="classDt[0].beginTime"> 
                 </div> 시~
                 <div class="col-md-2  form-group" >
                     <input type="text" id="endTime1" class="timeend form-control" name="classDt[0].endTime"> 
                 </div> 시 
				
                 <div class="col-md-3"></div>
                 <div class="col-md-2  form-group">2회차</div>
                 <div class="col-md-2  form-group" >
                     <input type="date" id="term2" class="form-control" name="classDt[1].term">
                 </div>
                 <div class="col-md-2  form-group" >
                     <input type="text" id="beginTime2" class="timestart form-control" name="classDt[1].beginTime"> 
                 </div> 시~
                 <div class="col-md-2  form-group" >
                     <input type="text" id="endTime2" class="timeend form-control" name="classDt[1].endTime"> 
                 </div> 시 
					
        		 <div class="col-md-3"></div>
                 <div class="col-md-2  form-group">3회차</div>
                 <div class="col-md-2  form-group" >
                     <input type="date" id="term3" class="form-control" name="classDt[2].term">
                 </div>
                 <div class="col-md-2  form-group" >
                     <input type="text" id="beginTime3" class="timestart form-control" name="classDt[2].beginTime"> 
                 </div> 시~
                 <div class="col-md-2  form-group" >
                     <input type="text" id="endTime3" class="timeend form-control" name="classDt[2].endTime"> 
                 </div> 시 
                 
                 <div class="col-md-3"></div>
                 <div class="col-md-2  form-group">4회차</div>
                 <div class="col-md-2  form-group" >
                     <input type="date" id="term4" class="form-control" name="classDt[3].term">
                 </div>
                 <div class="col-md-2  form-group" >
                     <input type="text" id="beginTime4" class="timestart form-control" name="classDt[3].beginTime"> 
                 </div> 시~
                 <div class="col-md-2  form-group" >
                     <input type="text" id="endTime4" class="timeend form-control" name="classDt[3].endTime"> 
                 </div> 시 `;
                 
        	// 시작시간
             $('input.timestart').timepicker({
    	    	 	timeFormat: 'HH:mm',
    	            interval: 60,
    	            minTime: '09',
    	            maxTime: '6:00pm',
    	            dynamic: false,
    	            dropdown: true,
    	            scrollbar: true
    	    	
    	     }); 
      	
      		// 종료시간
    	   	 $('input.timeend').timepicker({
    	    	 		timeFormat: 'HH:mm',
    	            	interval: 60,
    	            	minTime: '10',
    	            	maxTime: '10:00pm',
    	            	dynamic: false,
    	            	dropdown: true,
    	            	scrollbar: true
    	    	
    	    		});
                 
             }
         
         function twoOut() {
        	 
        	 classtime.innerHTML="";
        	 classtime.innerHTML+=` 
					
                 <div class="col-md-3"></div>
                 <div class="col-md-2  form-group">1회차</div>
                 <div class="col-md-2  form-group" >
                     <input type="date" id="term1" class="form-control" name="classDt[0].term">
                 </div>
                 <div class="col-md-2  form-group" >
                     <input type="text" id="beginTime1" class="timestart form-control" name="classDt[0].beginTime"> 
                 </div> 시~
                 <div class="col-md-2  form-group" >
                     <input type="text" id="endTime1" class="timeend form-control" name="classDt[0].endTime"> 
                 </div> 시 
				
                 <div class="col-md-3"></div>
                 <div class="col-md-2  form-group">2회차</div>
                 <div class="col-md-2  form-group" >
                     <input type="date" id="term2" class="form-control" name="classDt[1].term">
                 </div>
                 <div class="col-md-2  form-group" >
                     <input type="text" id="beginTime2" class="timestart form-control" name="classDt[1].beginTime"> 
                 </div> 시~
                 <div class="col-md-2  form-group" >
                     <input type="text" id="endTime2" class="timeend form-control" name="classDt[1].endTime"> 
                 </div> 시 `;
                 
        	// 시작시간
             $('input.timestart').timepicker({
    	    	 	timeFormat: 'HH:mm',
    	            interval: 60,
    	            minTime: '09',
    	            maxTime: '6:00pm',
    	            dynamic: false,
    	            dropdown: true,
    	            scrollbar: true
    	    	
    	     }); 
      	
      		// 종료시간
    	   	 $('input.timeend').timepicker({
    	    	 		timeFormat: 'HH:mm',
    	            	interval: 60,
    	            	minTime: '10',
    	            	maxTime: '10:00pm',
    	            	dynamic: false,
    	            	dropdown: true,
    	            	scrollbar: true
    	    	
    	    		});
        	 
             }
         
         /* let sample = document.getElementsByName('classCnt');
     		console.log(sample);
     	        for(var i=0; i<sample.length; i++){
     			if(sample[i].checked == true){
     			alert(sample[i].value);
     			console.log(sample[i].value);
     			}
     		}*/
     		
     	// 폼 재출전 체크
   		 function message() {
    			
    			if($("#title").val() == "") {
    				alert('클래스이름을 알려주세요.');
    				$("#title").focus();
    				return false;
    			}
    			
    			if($("#jobCd").val() == "") {
    				alert('어떤 카테고리인가요?');
    				return false;
    			}
    			
    			if($("#content").val() == "") {
    				alert('신청할 클래스에 대해 설명해주세요.');
    				$("#content").focus();
    				return false;
    			}
    			
    			if ($("#content").val() != "") {

   				var count = /^[\w\Wㄱ-ㅎㅏ-ㅣ가-힣]{50,100}$/;

   				if (count.test($("#content").val()) == false) {
   					alert("설명은 50자 이상 100자 이하으로 작성가능합니다.");
   					$("#content").focus();
   					return false;
   				}

   			}
    			
    			if($("#crclm").val() == "") {
    				alert('신청할 클래스의 커리큘럼을 적어주세요.');
    				$("#crclm").focus();
    				return false;
    			}
    			
    			if ($("#crclm").val() != "") {

   				var count = /^[\w\Wㄱ-ㅎㅏ-ㅣ가-힣]{100,500}$/;

   				if (count.test($("#crclm").val()) == false) {
   					alert("커리큘럼은 100자 이상 500자 이하으로 작성가능합니다.");
   					$("#crclm").focus();
   					return false;
   				}

   			}
    			
    			if($("#file").val() == "") {
    				alert('클래스를 대표하는 사진을 첨부해주세요.');
    				$("#file").focus();
    				return false;
    			}
    			
    			// 클래스 날짜와 시간 체크
    			if($("#term1").val() == "" ||  $("#beginTime1").val() == "" || $("#endTime1").val() == "") {
    				alert('1회차 클래스날짜와 시간을 체크해주세요.');
    				return false;
    			}
    			if($("#term2").val() == "" ||  $("#beginTime2").val() == "" || $("#endTime2").val() == "") {
    				alert('2회차 클래스날짜와 시간을 체크해주세요.');
    				return false;
    			}
    			if($("#term3").val() == "" ||  $("#beginTime3").val() == "" || $("#endTime3").val() == "") {
    				alert('3회차 클래스날짜와 시간을 체크해주세요.');
    				return false;
    			}
    			if($("#term4").val() == "" ||  $("#beginTime4").val() == "" || $("#endTime4").val() == "") {
    				alert('4회차 클래스날짜와 시간을 체크해주세요.');
    				return false;
    			}
    			
    			
    		
    			alert("클래스 신청이 완료되었습니다.");
    			return true;
    		}
   		  	
     		
     		
         
        </script>
         
        
         
         <script src="bootstrap/voler/assets/js/feather-icons/feather.min.js"></script>
    <script src="bootstrap/voler/assets/vendors/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    <script src="bootstrap/voler/assets/js/app.js"></script>
    
    <script src="bootstrap/voler/assets/js/main.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script>    
</body>
</html>